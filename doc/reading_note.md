# 読書ノート

## Chapter1

### Section1

三大要素

- 安全性
- 速度
- 並行性

Rust とは「さび」のこと

### Section2

- Rust
  - コンパイラー方式
    - Python の何倍も高速に動く
    - OS やデータベースなど、システム寄りの開発に向いている

#### パッケージ管理

| 言語   | パッケージ管理システム |
| ------ | ---------------------- |
| Python | PyPI(pip)              |
| Rust   | Cargo(cargo)           |

#### 型

- Python
  - 動的型付き言語
  - 型ヒントはある
- Rust
  - 静的型付き言語
  - 型推論がある

#### メモリ管理

- Python
  - GC(ガベージコレクター)
    - 実行時のオーバーヘッドが大きい
    - 「参照カウント」を採用
- Rust
  - 所有権システム
    - 所有権とライフタイム

どちらも明示的にメモリを解放する必要はない

### Section3 開発環境

#### インストール方法

- Rust のインストール方法：省略
- VSCode のおすすめ拡張機能
  - (Rust の devcontainer を使ったときに、最初から入っていたもの)
  - rust-lang.rust-analyzer
  - serayuzgur.crates
  - vadimcn.vscode-lldb
  - tamasfe.even-better-toml

#### 実行方法

1. .rs ファイルにソースを記述
2. `rustc <file_path>`
3. `./<exe>`

### Section4 はじめての Rust

`println!`などの末尾の感嘆符は**マクロ**であることを示す

**値を変数に束縛する**

Rust は型に厳しい言語。整数型と実数型を明確に区別する

### Section5

- main 関数から始まる
- 関数定義は`fn`
- 1 行コメントは`//`
- 複数行コメントは`/* */`
- 文末にはセミコロンが必要
- for 文は 「for 変数 in 開始値..終了値+1」
- if 文は if, else if, else
- 条件文に丸括弧はいらない

### Section6

- 改行を出力しない`print!`マクロがある
- `"{:3}"`のように書くことで、出力の仕方を制御することができる

### Section7

- 変数定義は
  - `let 変数名 = 値;`
  - 値を変数に束縛するともいう
- 変更可能な変数を定義する場合
  - `let mut 変数名 = 値;`

**不変な変数が基本となっている => 「安全なプログラムを作ることが最優先」**

### Section8

- 型推論が有効になるのは関数の内側だけ
- Rust で扱える数値型は大きく分けて「符号あり整数」、「符号なし整数」、「浮動小数点数」
- 利用可能な数値の範囲を知る方法
  - `i8::MIN`, `i8::MAX`など
- 型変数を明示する場合
  - `let 変数名: 型名 = 値;`

### Section9

- 「文字」と「文字列」を明確に区別する
  - 文字
    - 例: 'A'
    - 型: char
    - 意味: 文字を表す
    - シングルクォートで囲まれた1文字
  - 文字列
    - 例: "A"
    - 型: &str
    - 意味: 文字列リテラル
    - ダブルクォートで囲まれた0文字以上の文字列
- **「as」は強制的な型変換を行う機能**
  - `let 変数名 = 変数 as 型`
- 関数宣言時は、引数や戻り値のデータ型を明示しないといけない
- 関数から値を戻す際に、2通りの書き方がある
  - `値`
  - `return 値;`
- クロージャーの書き方
  - `let 名前 = |引数| 定義;`

### Section10

- for の範囲指定
  -  range(1, n) <=> 1..n
-  関数の型の指定の仕方
   -  `[usize; 100]`: 100個のusize型の配列
-  配列に対する操作
   -  `arr[index] = value;`
   -  `let v = arr[index];`

#### 参照とは

- **値そのものではなく、値を表す参照情報**
  - C言語で言うポインター
- 関数呼び出しのとき
  - `&mut`を指定することでそれが可変参照であることを明示する
- 引数を定義するとき
  - `arg: &mut u32`
- 参照を実態に戻すとき
  - `*arg`
  - **デリファレンス**と呼ぶ

#### for文の書き方

- ```
  for 変数 in イテレーター {
    // 繰り返し処理
  }
  ```
- `1..11`
  - 1から10を順に返す
- `1..=10`
  - 1から10を順に返す
